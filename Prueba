import React, { useState, useEffect } from 'react';
import styled from 'styled-components';

// Define tus styled-components si es necesario
const ButtonGroup = styled.div`
  display: flex;
  gap: 10px;
`;

const Button = styled.button`
  padding: 10px 20px;
  font-size: 16px;
  cursor: pointer;
`;

const PermissionsModule = () => {
  const [permissions, setPermissions] = useState({ Insertar: 2, Editar: 2 });

  useEffect(() => {
    const fetchPermissions = async () => {
      try {
        const response = await fetch('http://localhost:3000/rolusuario/');
        const data = await response.json();
        
        // Suponiendo que tienes un ID de usuario disponible
        const userId = 1; // Reemplaza esto con el ID del usuario actual

        const userPermission = data.find(permission => permission.ID === userId);
        if (userPermission) {
          setPermissions({
            Insertar: userPermission.Insertar,
            Editar: userPermission.Editar
          });
        }
      } catch (error) {
        console.error('Error fetching permissions:', error);
      }
    };

    fetchPermissions();
  }, []);

  const handleInsert = () => {
    // Lógica para insertar
    console.log('Insertar nuevo elemento');
  };

  const handleEdit = () => {
    // Lógica para editar
    console.log('Editar elemento existente');
  };

  return (
    <ButtonGroup>
      {permissions.Insertar === 1 && (
        <Button onClick={handleInsert}>Insertar</Button>
      )}
      {permissions.Editar === 1 && (
        <Button onClick={handleEdit}>Editar</Button>
      )}
    </ButtonGroup>
  );
};

export default PermissionsModule;