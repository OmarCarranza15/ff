Para insertar en la tabla de auditoría (`Auditoria`) tanto en inserciones como en actualizaciones, debes seguir estos pasos generales en el código. Aquí te muestro cómo podrías adaptar tu código en los casos de inserción y actualización para registrar la información de auditoría, incluyendo el campo `N`:

### 1. **Insertar en la Tabla de Auditoría al Insertar un Nuevo Registro**

Cuando insertes un nuevo registro en la tabla principal (por ejemplo, `Paises`), también debes insertar un registro en la tabla de auditoría para registrar esta acción.

Aquí está el código ajustado para manejar esto:

```javascript
const SaveModal = async () => {
  const newErrors = { pais: "" };

  if (!modalValues.pais.trim()) {
    newErrors.pais = "El campo País es obligatorio";
  } else if (!/^[a-zA-ZÑñ\s]+$/.test(modalValues.pais)) {
    newErrors.pais = "El campo País solo acepta letras y espacios en blanco";
  }
  setErrors(newErrors);

  if (Object.values(newErrors).every((error) => error === "")) {
    try {
      // Verificar si el país ya existe en la base de datos
      const response = await axios.get(
        `http://localhost:3000/pais?N_Pais=${modalValues.pais}`
      );
      if (
        response.data.some(
          (pais) =>
            pais.N_Pais.toLowerCase() === modalValues.pais.toLowerCase()
        )
      ) {
        setErrors({ pais: "El país ya existe" });
        return;
      }

      // Insertar un nuevo país
      const newPais = { N_Pais: modalValues.pais };
      const insertResponse = await axios.post(
        `http://localhost:3000/pais`,
        newPais
      );

      // Guardar la inserción en la auditoría
      const auditoriaData = {
        Columna: 'N_Pais',
        Campo_Original: null, // Campo original vacío para inserciones
        Campo_Nuevo: modalValues.pais,
        Matriz: 'Paises',
        Accion: 1, // Acción 1 para inserción
        ID_Usuario: userId,
        N: insertResponse.data.N  // Campo N de la nueva entrada
      };
      await axios.post('http://localhost:3000/auditoria', auditoriaData);

      // Actualizar la lista de países con el nuevo país
      const updatedRecords = [
        ...records,
        { id: insertResponse.data.id, N_Pais: modalValues.pais },
      ];
      setRecords(updatedRecords);
      setShowModal(false); // Ocultar el modal después de guardar
      setModalValues({ pais: "" }); // Limpiar los valores del modal

      // Notificación de éxito
      const toastElement = document.createElement("div");
      toastElement.className = "toast-success";
      toastElement.innerHTML = "¡País insertado correctamente!";

      document.body.appendChild(toastElement);

      // Ocultar la notificación luego de 1 segundo
      setTimeout(() => {
        toastElement.remove();
        window.location.reload(); // Recargar la página después de 1 segundo
      }, 1000);
    } catch (error) {
      console.error("Error al insertar el nuevo País:", error);
    }
  }
};
```

### 2. **Insertar en la Tabla de Auditoría al Actualizar un Registro**

Cuando actualices un registro, también debes registrar el cambio en la tabla de auditoría. Aquí está el código adaptado para manejar esto:

```javascript
const saveChanges = async (id) => {
  try {
    const updateRow = {
      ...editedRow,
    };

    // Verificar si el país ya existe
    if (editedRow && editedRow.N_Pais) {
      console.log("Checking if country exists...");
      const response = await axios.get(
        `http://localhost:3000/pais?N_Pais=${editedRow.N_Pais}`
      );

      console.log("Response:", response.data);

      if (
        response.data.some(
          (pais) =>
            pais.N_Pais.toLowerCase() === editedRow.N_Pais.toLowerCase()
        )
      ) {
        const errorNotification = document.createElement("div");
        errorNotification.className = "error-notification";
        errorNotification.innerHTML = `
          <span class="error-icon">!</span>
          <span class="error-message">
            El País que intenta actualizar ya existe en la base de datos.
            Por favor, ingrese un país diferente.
          </span>
        `;
        document.body.appendChild(errorNotification);

        // Ocultar la notificación después de 2 segundos
        setTimeout(() => {
          errorNotification.remove();
        }, 2000);
        return;
      }
    } else {
      setErrors({ N_Pais: "El campo país no puede estar vacío" });
      return;
    }

    // Obtener el valor original del campo
    const originalRow = records.find((row) => row.id === id);

    await axios.put(`http://localhost:3000/pais/${id}`, updateRow);

    // Guardar el cambio en la auditoría
    const auditoriaData = {
      Columna: 'N_Pais',
      Campo_Original: originalRow.N_Pais,
      Campo_Nuevo: editedRow.N_Pais,
      Matriz: 'Paises',
      Accion: 2, // Acción 2 para actualización
      ID_Usuario: userId,
      N: editedRow.N  // Campo N de la entrada actualizada
    };

    await axios.post('http://localhost:3000/auditoria', auditoriaData);

    const updatedRecords = records.map((row) =>
      row.id === id ? { ...editedRow } : row
    );

    setRecords(updatedRecords);
    setEditedRow(null);
    setEditMode(null);

    // Notificación de éxito
    const toastElement = document.createElement("div");
    toastElement.className = "toast-notification";
    toastElement.innerHTML = "País actualizado con éxito!";

    document.body.appendChild(toastElement);

    // Ocultar la notificación después de 1 segundo
    setTimeout(() => {
      toastElement.remove();
      window.location.reload(); // Recargar la página después de 1 segundo
    }, 1000);
  } catch (error) {
    console.error("Error al guardar los cambios", error);
  }
};
```

### Resumen

- **Insertar**: Asegúrate de registrar el campo `N` (índice) al agregar un nuevo registro.
- **Actualizar**: Registra los valores originales y nuevos en la tabla de auditoría, incluyendo el campo `N`.

Asegúrate de ajustar los detalles del campo `N` según la estructura exacta de tu base de datos y los requerimientos de tu aplicación.