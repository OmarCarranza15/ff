// PermissionsModule.js
import React, { useState, useEffect } from 'react';
import axios from 'axios';
import styled from 'styled-components';

const ButtonGroup = styled.div`
  display: flex;
  gap: 10px;
`;

const Button = styled.button`
  padding: 10px 20px;
  font-size: 16px;
  cursor: pointer;
`;

const PermissionsModule = () => {
  const [permissions, setPermissions] = useState({ insert: false, edit: false });

  useEffect(() => {
    const fetchPermissions = async () => {
      try {
        const userId = localStorage.getItem('userId'); // Obtener el ID del usuario del localStorage

        if (userId) {
          const response = await axios.get(`http://localhost:3000/roles/${userId}`);
          const roleData = response.data;

          setPermissions({
            insert: roleData.Insertar === 1,
            edit: roleData.Editar === 1
          });
        }
      } catch (error) {
        console.error('Error fetching permissions:', error);
      }
    };

    fetchPermissions();
  }, []);

  const handleInsert = () => {
    // Lógica para insertar
    console.log('Insertar nuevo elemento');
  };

  const handleEdit = () => {
    // Lógica para editar
    console.log('Editar elemento existente');
  };

  return (
    <ButtonGroup>
      {permissions.insert && (
        <Button onClick={handleInsert}>Insertar</Button>
      )}
      {permissions.edit && (
        <Button onClick={handleEdit}>Editar</Button>
      )}
    </ButtonGroup>
  );
};

export default PermissionsModule; 