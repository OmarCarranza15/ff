import React, { useState, useEffect } from 'react';
// Importaciones adicionales

const LandingPage = () => {
  const [userPermissions, setUserPermissions] = useState({ Insertar: 0, Editar: 0 }); // Estado para permisos del usuario

  useEffect(() => {
    // Simulación de obtención de permisos del usuario
    const fetchUserPermissions = async () => {
      try {
        const response = await fetch('http://localhost:3000/rolusuario/');
        const data = await response.json();
        // Suponiendo que data es un array y necesitas encontrar el permiso específico para el usuario actual
        const userPermission = data.find(permission => permission.ID === userId); // Ajusta userId según sea necesario
        if (userPermission) {
          setUserPermissions({
            Insertar: userPermission.Insertar,
            Editar: userPermission.Editar
          });
        }
      } catch (error) {
        console.error('Error fetching user permissions:', error);
      }
    };

    fetchUserPermissions();
  }, []);

  return (
    <MainContainer>
      <TopBar />
      <ContentContainer>
        <Sidebar />
        <DataTableContainer>
          <HeaderContainer>
            <Title>Matriz de perfiles de {selectedCountry}</Title>
            <ButtonGroup>
              {userPermissions.Insertar === 1 && (
                <Button onClick={handleInsert}>
                  <FaPlus /> Insertar Nuevo Perfil
                </Button>
              )}
              {userPermissions.Editar === 1 && (
                <Button primary onClick={toggleFilters}>
                  {showFilters ? "Ocultar" : "Buscar"}
                </Button>
              )}
            </ButtonGroup>
          </HeaderContainer>
          <FilterWrapper show={showFilters}>
            {/* Contenido del filtro */}
          </FilterWrapper>
          {/* Contenido de la tabla */}
        </DataTableContainer>
      </ContentContainer>
    </MainContainer>
  );
};

export default LandingPage;